{% extends 'layout.html'%}
{% block body %}

<div class="row">
    <div class="col-md-6">
        <p class="lead">
            <a class="tn btn-lg btn-rigth" href="/" role="button">Go back</a>
        </p>
    </div>
</div>
<p> </p>
<div class="col-md-6 order-md-1">
    <div class="table-responsive">
        <table class="table table-sm bg-white table-bordered bg-white">
            <tbody>
                <tr>
                    <td class="table-secondary" style="text-align:center"><strong
                            class="h5 text-dark">{{ pTreeStocks['NDAQ'][0]}}</strong></td>
                    <td class="table-light" style="text-align:center"><strong
                            class="h5 text-dark">{{ pTreeStocks['NDAQ'][1]}}</strong> {{ pTreeStocks['NDAQ'][2]}}
                        ({{ pTreeStocks['NDAQ'][3]}}%)</td>
                </tr>
                <tr>
                    <td class="table-secondary" style="text-align:center"><strong
                            class="h5 text-dark">{{ pTreeStocks['DJI'][0]}}</strong></td>
                    <td class="table-light" style="text-align:center"><strong
                            class="h5 text-dark">{{ pTreeStocks['DJI'][1]}}</strong> {{ pTreeStocks['DJI'][2]}}
                        ({{ pTreeStocks['DJI'][3]}}%)</td>
                </tr>
                <tr>
                    <td class="table-secondary" style="text-align:center"><strong
                            class="h5 text-dark">{{ pTreeStocks['GSPC'][0]}}</strong></td>
                    <td class="table-light" style="text-align:center"><strong
                            class="h5 text-dark">{{ pTreeStocks['GSPC'][1]}}</strong> {{ pTreeStocks['GSPC'][2]}}
                        ({{ pTreeStocks['GSPC'][3]}}%)</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<p> </p>
{% for stock in pTreeStocks %}
{% if pTreeStocks[stock][stock+'0'] == 'DATA_FOUND' %}
<div class="table-responsive">

    <table class="table table-sm table-borderless">
        <tbody>
            <tr>
                <td><strong class="h5 text-dark font-weight-bold text-left">{{ pTreeStocks[stock][stock+'1']}}({{ stock }})</strong></td>
            </tr>
            <tr>
                <td><strong class="h3 text-dark font-weight-bold text-left">{{ pTreeStocks[stock][stock+'4']}}</strong> <strong class="h6 ChangeColor">{{ pTreeStocks[stock][stock+'5'][5]}}</strong> <strong class="h6 ChangeColor">{{ pTreeStocks[stock][stock+'5'][6]}}</strong><strong class="h6">%</strong></td>
            </tr>    
            <tr>
                <td><strong class="h6 text-dark font-weight-bold text-left">{{ pTreeStocks[stock][stock+'2']}}</strong> </td>
            </tr>
            <tr>
                <td><strong class="h6 text-dark font-weight-bold text-left">{{ pTreeStocks[stock][stock+'3'][1]}}</strong> </td>
            </tr>                                                      
        </tbody>
    </table>
</div>
<div class="table-responsive">

    <table class="table table-striped table-sm bg-white table-bordered bg-white">
        <thead>
            <tr>
                <td>Date</td>
                {% for vdate in pTreeStocks['DATES'] %}
                <td style="text-align:right">{{vdate}}</td>
                {% endfor %}
            </tr>
        <tbody>
            <tr>
                <td>Close Price</td>
                {% for vprice in pTreeStocks[stock][stock+'6'] %}
                <td style="text-align:right">{{vprice}}</td>
                {% endfor %}
            </tr>
        </tbody>
        </thead>
    </table>
</div>

{% endif %}
{% if pTreeStocks[stock][stock+'0'] == 'NO_DATA_FOUND' %}
<p> </p>
<p class="h4 text-dark">{{ stock }}</p>
<div class="table-responsive">
    <table class="table table-striped table-sm bg-white table-bordered bg-white">
        <thead>
            <tr>
                <td>Stock</td>
                <td>Log</td>
            </tr>
        <tbody>
            <tr>
                <td>{{ stock }}</td>
                <td>{{ pTreeStocks[stock][stock+'1'] }}</td>
            </tr>
        </tbody>
        </thead>
    </table>
</div>
{% endif %}
{% endfor %}

{% if pTreeStocks['DATES'][0] != '' %}
<p> </p>
<div class="table-responsive">

    <table class="table table-borderless">
        <tbody>
            <tr>
                <td><strong class="h3 text-dark font-weight-bold">Grid of Stocks</strong></td>
            </tr>
        </tbody>
    </table>
</div>
<div class="table-responsive">

    <table class="table table-striped table-sm bg-white table-bordered bg-white">
        <tbody>
            <tr>
                <td>Stock</td>
                <td style="text-align:right">Current Price</td>
                <td style="text-align:right">Change</td>
                <td style="text-align:right">Chg%</td>
                <td style="text-align:right">Post Mkt Change</td>
                <td style="text-align:right">Post Mkt Chg%</td>
                <td style="text-align:right">Pre Mkt Change</td>
                <td style="text-align:right">Pre Mkt Chg%</td>
                <td style="text-align:right">Earning Day</td>
                <td style="text-align:right">Average Price</td>
                <td style="text-align:right">Return to </td>
                <td style="text-align:left">Avg</td>
                {% for vdate in pTreeStocks['DATES'] %}
                <td style="text-align:right">{{vdate}}</td>
                {% endfor %}
            </tr>
            {% for stock in pTreeStocks %}
            <tr>
                {% if pTreeStocks[stock][stock+'0'] == 'DATA_FOUND' %}
                <td>{{ stock }}</td>
                <td style="text-align:right">{{ pTreeStocks[stock][stock+'4']}}</td>
                <td style="text-align:right"><strong class="ChangeColor">{{ pTreeStocks[stock][stock+'5'][5]}}</strong></td>
                <td style="text-align:right"><strong class="ChangeColor">{{ pTreeStocks[stock][stock+'5'][6]}}</strong></td>
                <td style="text-align:right"><strong class="ChangeColor">{{ pTreeStocks[stock][stock+'5'][7]}}</strong></td>
                <td style="text-align:right"><strong class="ChangeColor">{{ pTreeStocks[stock][stock+'5'][8]}}</strong></td>
                <td style="text-align:right"><strong class="ChangeColor">{{ pTreeStocks[stock][stock+'5'][9]}}</strong></td>
                <td style="text-align:right"><strong class="ChangeColor">{{ pTreeStocks[stock][stock+'5'][10]}}</strong></td>
                <td style="text-align:right">{{ pTreeStocks[stock][stock+'3'][0]}}</td>
                <td style="text-align:right">{{ pTreeStocks[stock][stock+'5'][0]}}</td>
                <td style="text-align:right">{{ pTreeStocks[stock][stock+'5'][2]}}</td>
                <td style="text-align:right">{{ pTreeStocks[stock][stock+'5'][3]}}</td>
                {% for vprice in pTreeStocks[stock][stock+'6'] %}
                <td style="text-align:right">{{vprice}}</td>
                {% endfor %}
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
<p> </p>

<div class="row">
    <div class="col-md-6">
        <p class="lead">
            <a class="tn btn-lg btn-rigth" href="/" role="button">Go back</a>
        </p>
    </div>
</div>

<script>
    var els = document.getElementsByClassName('ChangeColor');
    for (var i = 0; i < els.length; i++) {
        var cell = els[i];
        if (cell.textContent < 0) {
            cell.classList.remove('green')
        } else {
            cell.classList.add('green');
        }
    }
</script>


{% endblock %}